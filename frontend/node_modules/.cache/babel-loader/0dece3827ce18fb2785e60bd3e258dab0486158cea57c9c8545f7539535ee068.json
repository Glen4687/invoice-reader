{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';// --- TYPE DEFINITIONS ---\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";// --- HELPER COMPONENTS ---\n// Component to render a table for line items\nconst ItemsTable=_ref=>{let{items}=_ref;if(!items||items.length===0)return null;// Dynamically find all possible headers from the items\nconst headers=Array.from(new Set(items.flatMap(item=>Object.keys(item))));return/*#__PURE__*/_jsx(\"figure\",{children:/*#__PURE__*/_jsxs(\"table\",{role:\"grid\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:headers.map(header=>/*#__PURE__*/_jsx(\"th\",{children:header.replace('Items(','').replace(')','')},header))})}),/*#__PURE__*/_jsx(\"tbody\",{children:items.map((item,index)=>/*#__PURE__*/_jsx(\"tr\",{children:headers.map(header=>/*#__PURE__*/_jsx(\"td\",{children:item[header]||'-'},header))},index))})]})});};// Component to render key-value pairs, excluding complex objects/arrays\nconst DetailsGrid=_ref2=>{let{data}=_ref2;const simpleDetails=Object.entries(data).filter(_ref3=>{let[,value]=_ref3;return typeof value!=='object'&&value!==null;});if(simpleDetails.length===0)return null;return/*#__PURE__*/_jsx(\"div\",{style:{display:'grid',gridTemplateColumns:'auto 1fr',gap:'0.5rem 1rem'},children:simpleDetails.map(_ref4=>{let[key,value]=_ref4;return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"strong\",{style:{justifySelf:'end'},children:[key,\":\"]}),/*#__PURE__*/_jsx(\"span\",{children:String(value)})]},key);})});};// --- MAIN APP COMPONENT ---\nfunction App(){const[selectedFile,setSelectedFile]=useState(null);const[extractedData,setExtractedData]=useState(null);const[isLoading,setIsLoading]=useState(false);const[error,setError]=useState(null);const handleFileChange=event=>{if(event.target.files){setSelectedFile(event.target.files[0]);setExtractedData(null);setError(null);}};const handleSubmit=async()=>{if(!selectedFile){setError('Please select a PDF file first.');return;}setIsLoading(true);setError(null);setExtractedData(null);const formData=new FormData();formData.append('file',selectedFile);try{const response=await axios.post('/api/extract',formData);setExtractedData(response.data);}catch(err){var _err$response,_err$response$data;const errorMsg=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.detail)||'An unexpected error occurred.';setError(\"Error: \".concat(errorMsg));}finally{setIsLoading(false);}};return/*#__PURE__*/_jsxs(\"main\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"nav\",{children:/*#__PURE__*/_jsx(\"ul\",{children:/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"strong\",{children:\"Invoice Extractor AI\"})})})}),/*#__PURE__*/_jsxs(\"article\",{children:[/*#__PURE__*/_jsxs(\"hgroup\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Upload Invoice\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Select a PDF to extract structured data using AI\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".pdf\",onChange:handleFileChange}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,disabled:!selectedFile||isLoading,\"aria-busy\":isLoading,children:isLoading?'Extracting...':'Extract Data'})]}),error&&/*#__PURE__*/_jsx(\"article\",{children:/*#__PURE__*/_jsx(\"p\",{style:{color:'var(--pico-color-red-500)'},children:error})}),extractedData&&/*#__PURE__*/_jsxs(\"article\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Extracted Details\"}),/*#__PURE__*/_jsx(DetailsGrid,{data:extractedData}),extractedData.Items&&/*#__PURE__*/_jsx(ItemsTable,{items:extractedData.Items})]})]});}export default App;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","ItemsTable","_ref","items","length","headers","Array","from","Set","flatMap","item","Object","keys","children","role","map","header","replace","index","DetailsGrid","_ref2","data","simpleDetails","entries","filter","_ref3","value","style","display","gridTemplateColumns","gap","_ref4","key","Fragment","justifySelf","String","App","selectedFile","setSelectedFile","extractedData","setExtractedData","isLoading","setIsLoading","error","setError","handleFileChange","event","target","files","handleSubmit","formData","FormData","append","response","post","err","_err$response","_err$response$data","errorMsg","detail","concat","className","type","accept","onChange","onClick","disabled","color","Items"],"sources":["/Users/glendsilva/Library/CloudStorage/OneDrive-SharpeProjectConsultingPtyLtd/Projects/Invoice/frontend/src/App.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\n\n// --- TYPE DEFINITIONS ---\ninterface Item {\n  [key: string]: any;\n}\n\ninterface ExtractedData {\n  Items?: Item[];\n  [key: string]: any;\n}\n\n// --- HELPER COMPONENTS ---\n\n// Component to render a table for line items\nconst ItemsTable: React.FC<{ items: Item[] }> = ({ items }) => {\n  if (!items || items.length === 0) return null;\n\n  // Dynamically find all possible headers from the items\n  const headers = Array.from(new Set(items.flatMap(item => Object.keys(item))));\n\n  return (\n    <figure>\n      <table role=\"grid\">\n        <thead>\n          <tr>\n            {headers.map(header => <th key={header}>{header.replace('Items(', '').replace(')', '')}</th>)}\n          </tr>\n        </thead>\n        <tbody>\n          {items.map((item, index) => (\n            <tr key={index}>\n              {headers.map(header => <td key={header}>{item[header] || '-'}</td>)}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </figure>\n  );\n};\n\n// Component to render key-value pairs, excluding complex objects/arrays\nconst DetailsGrid: React.FC<{ data: ExtractedData }> = ({ data }) => {\n  const simpleDetails = Object.entries(data).filter(([, value]) => \n    typeof value !== 'object' && value !== null\n  );\n\n  if (simpleDetails.length === 0) return null;\n\n  return (\n    <div style={{ display: 'grid', gridTemplateColumns: 'auto 1fr', gap: '0.5rem 1rem' }}>\n      {simpleDetails.map(([key, value]) => (\n        <React.Fragment key={key}>\n          <strong style={{ justifySelf: 'end' }}>{key}:</strong>\n          <span>{String(value)}</span>\n        </React.Fragment>\n      ))}\n    </div>\n  );\n};\n\n\n// --- MAIN APP COMPONENT ---\n\nfunction App() {\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [extractedData, setExtractedData] = useState<ExtractedData | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    if (event.target.files) {\n      setSelectedFile(event.target.files[0]);\n      setExtractedData(null);\n      setError(null);\n    }\n  };\n\n  const handleSubmit = async () => {\n    if (!selectedFile) {\n      setError('Please select a PDF file first.');\n      return;\n    }\n\n    setIsLoading(true);\n    setError(null);\n    setExtractedData(null);\n\n    const formData = new FormData();\n    formData.append('file', selectedFile);\n\n    try {\n      const response = await axios.post<ExtractedData>('/api/extract', formData);\n      setExtractedData(response.data);\n    } catch (err: any) {\n      const errorMsg = err.response?.data?.detail || 'An unexpected error occurred.';\n      setError(`Error: ${errorMsg}`);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <main className=\"container\">\n      <nav>\n        <ul>\n          <li><strong>Invoice Extractor AI</strong></li>\n        </ul>\n      </nav>\n      \n      <article>\n        <hgroup>\n          <h1>Upload Invoice</h1>\n          <h2>Select a PDF to extract structured data using AI</h2>\n        </hgroup>\n        <input type=\"file\" accept=\".pdf\" onChange={handleFileChange} />\n        <button onClick={handleSubmit} disabled={!selectedFile || isLoading} aria-busy={isLoading}>\n          {isLoading ? 'Extracting...' : 'Extract Data'}\n        </button>\n      </article>\n\n      {error && <article><p style={{ color: 'var(--pico-color-red-500)' }}>{error}</p></article>}\n\n      {extractedData && (\n        <article>\n          <h2>Extracted Details</h2>\n          <DetailsGrid data={extractedData} />\n          {extractedData.Items && <ItemsTable items={extractedData.Items} />}\n        </article>\n      )}\n    </main>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}